(()=>{var e={};e.id=5823,e.ids=[5823],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13861:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},17925:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Volumes/MyVolume/Laravel/CityResQ360-DTUDZ/AppMobile/src/app/map/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/MyVolume/Laravel/CityResQ360-DTUDZ/AppMobile/src/app/map/page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27886:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var t=a(65239),r=a(48088),l=a(88170),i=a.n(l),n=a(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c={children:["",{children:["map",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,17925)),"/Volumes/MyVolume/Laravel/CityResQ360-DTUDZ/AppMobile/src/app/map/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"/Volumes/MyVolume/Laravel/CityResQ360-DTUDZ/AppMobile/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,36074)),"/Volumes/MyVolume/Laravel/CityResQ360-DTUDZ/AppMobile/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/Volumes/MyVolume/Laravel/CityResQ360-DTUDZ/AppMobile/src/app/map/page.tsx"],x={require:a,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/map/page",pathname:"/map",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35442:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var t=a(60687),r=a(43210),l=a(60580);a(18745),a(2529);var i=a(62688);let n=(0,i.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var d=a(13861),c=a(97992),o=a(43649),x=a(51361);let m=(0,i.A)("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);var h=a(11860);let g=(0,i.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var p=a(5336),y=a(58559),u=a(48730);let b=(0,i.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString();let v=[{value:"ALL",label:"Tất cả",color:"#6b7280"},{value:"NGAP",label:"Ngập nước",color:"#3b82f6"},{value:"O_GA",label:"Ổ g\xe0",color:"#f59e0b"},{value:"CAY_DO",label:"C\xe2y đổ",color:"#10b981"},{value:"RAC_THAI",label:"R\xe1c thải",color:"#8b5cf6"},{value:"DEN_DUONG",label:"Đ\xe8n đường",color:"#ef4444"},{value:"KET_XE",label:"Kẹt xe",color:"#ec4899"},{value:"CHAY",label:"Ch\xe1y nổ",color:"#dc2626"},{value:"TAI_NAN",label:"Tai nạn",color:"#f97316"}];function j(){let e=(0,r.useRef)(null);(0,r.useRef)(null);let[s,a]=(0,r.useState)(!1),[i,j]=(0,r.useState)("ALL"),[N,f]=(0,r.useState)({reports:!0,incidents:!0,sensors:!0,floodZones:!0}),[k,w]=(0,r.useState)(null),[A,_]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"relative w-full h-screen overflow-hidden bg-gray-50",children:[(0,t.jsx)(l.default,{}),(0,t.jsxs)("div",{className:"absolute inset-0 pt-18 sm:pt-18",children:[(0,t.jsx)("div",{ref:e,className:"w-full h-full"}),(0,t.jsx)("div",{className:"absolute left-0 top-20 sm:top-24 bottom-0 w-80 bg-white/98 dark:bg-gray-900/95 backdrop-blur-xl shadow-2xl border-r border-gray-200 dark:border-gray-800 z-10 overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(n,{className:"w-5 h-5 text-brand-600"}),(0,t.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wide",children:"Lọc theo loại"})]}),(0,t.jsx)("div",{className:"space-y-2",children:v.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors",children:[(0,t.jsx)("input",{type:"radio",name:"filter",checked:i===e.value,onChange:()=>j(e.value),className:"w-4 h-4 text-brand-600 focus:ring-brand-500"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.label})]})]},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(d.A,{className:"w-5 h-5 text-brand-600"}),(0,t.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wide",children:"Hiển thị lớp dữ liệu"})]}),(0,t.jsx)("div",{className:"space-y-2",children:[{key:"reports",label:"Phản \xe1nh (Reports)",icon:c.A},{key:"incidents",label:"Sự cố (Incidents)",icon:o.A},{key:"sensors",label:"Cảm biến IoT",icon:x.A},{key:"floodZones",label:"V\xf9ng ngập",icon:m}].map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:N[e.key],onChange:()=>f({...N,[e.key]:!N[e.key]}),className:"w-5 h-5 text-brand-600 rounded focus:ring-brand-500"}),(0,t.jsx)(e.icon,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.label})]},e.key))})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-3",children:"Ch\xfa th\xedch"}),(0,t.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Trạng th\xe1i Phản \xe1nh:"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Chờ xử l\xfd"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Đang xử l\xfd"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Đ\xe3 giải quyết"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Mức độ Sự cố:"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-600"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Cao"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Trung b\xecnh"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Thấp"})]})]})]})]})]})]})}),A&&k&&(0,t.jsx)("div",{className:"absolute top-20 sm:top-24 right-0 bottom-0 w-96 bg-white dark:bg-gray-900 shadow-2xl border-l border-gray-200 dark:border-gray-800 z-40 overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Chi tiết"}),(0,t.jsx)("button",{onClick:()=>{_(!1),w(null)},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400",children:(0,t.jsx)(h.A,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"title"in k?k.title:k.name}),"description"in k&&k.description&&(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:k.description})]}),"loai_su_co"in k&&k.loai_su_co&&(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold text-white",style:{backgroundColor:(e=>{let s=v.find(s=>s.value===e);return s?.color||"#6b7280"})(k.loai_su_co)},children:v.find(e=>e.value===("loai_su_co"in k?k.loai_su_co:""))?.label})}),"report"===k.layer_type&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(g,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Người b\xe1o c\xe1o:"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:k.reporter_name||"N/A"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:["RESOLVED"===k.status?(0,t.jsx)(p.A,{className:"w-4 h-4 text-green-500"}):"IN_PROGRESS"===k.status?(0,t.jsx)(y.A,{className:"w-4 h-4 text-blue-500"}):(0,t.jsx)(u.A,{className:"w-4 h-4 text-yellow-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Trạng th\xe1i:"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:"RESOLVED"===k.status?"Đ\xe3 giải quyết":"IN_PROGRESS"===k.status?"Đang xử l\xfd":"Chờ xử l\xfd"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Thời gian:"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(k.created_at).toLocaleString("vi-VN")})]})]}),"incident"===k.layer_type&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Mức độ:"}),(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold text-white",style:{backgroundColor:(e=>{switch(e){case"HIGH":return"#dc2626";case"MEDIUM":return"#f59e0b";case"LOW":return"#10b981";default:return"#6b7280"}})(k.severity)},children:"HIGH"===k.severity?"Cao":"MEDIUM"===k.severity?"Trung b\xecnh":"Thấp"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(y.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Trạng th\xe1i:"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:"ACTIVE"===k.status?"Đang diễn ra":"Đ\xe3 xử l\xfd"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Thời gian:"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(k.created_at).toLocaleString("vi-VN")})]})]}),"sensor"===k.layer_type&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(x.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Loại:"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:k.sensor_type})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:["ONLINE"===k.status?(0,t.jsx)(p.A,{className:"w-4 h-4 text-green-500"}):(0,t.jsx)(b,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Trạng th\xe1i:"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:"ONLINE"===k.status?"Online":"Offline"})]}),k.last_reading&&(0,t.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Dữ liệu mới nhất:"}),(0,t.jsx)("pre",{className:"text-xs text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:JSON.stringify(k.last_reading,null,2)})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-brand-50 dark:bg-brand-900/20 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(c.A,{className:"w-4 h-4 text-brand-600 dark:text-brand-400"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Vị tr\xed"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k.latitude.toFixed(6),", ",k.longitude.toFixed(6)]})]})]})]})})]})]})}function N(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-brand-200 border-t-brand-600 rounded-full animate-spin"})}),(0,t.jsx)("div",{className:"mt-6 text-lg font-semibold text-gray-700",children:"Đang tải bản đồ CityResQ360..."}),(0,t.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]}),children:(0,t.jsx)(j,{})})}},48730:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},51361:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},58559:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},90278:(e,s,a)=>{Promise.resolve().then(a.bind(a,35442))},97992:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},98526:(e,s,a)=>{Promise.resolve().then(a.bind(a,17925))}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[7642,8631,3093,1435],()=>a(27886));module.exports=t})();