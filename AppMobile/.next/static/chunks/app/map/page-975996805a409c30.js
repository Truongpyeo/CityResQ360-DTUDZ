(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5823],{646:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1243:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2657:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3866:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var r=a(5155),s=a(2115),l=a(4690),i=a(5411),n=a.n(i);a(8689);var o=a(9946);let c=(0,o.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var d=a(2657),y=a(4516),x=a(1243),g=a(4355);let u=(0,o.A)("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);var m=a(4416);let h=(0,o.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var p=a(646),f=a(9397),b=a(4186);let N=(0,o.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var v=a(9509);{let e=v.env.NEXT_PUBLIC_MAPBOX_TOKEN;e&&(n().accessToken=e)}let j=[{id:1,title:"Đường ngập nước",description:"Đường L\xfd Thường Kiệt bị ngập sau mưa lớn",latitude:10.7769,longitude:106.7009,loai_su_co:"NGAP",status:"PENDING",reporter_name:"Nguyễn Văn A",created_at:new Date().toISOString()},{id:2,title:"Ổ g\xe0 tr\xean đường",description:"Nhiều ổ g\xe0 xuất hiện tr\xean đường Trần Hưng Đạo",latitude:10.7711,longitude:106.7056,loai_su_co:"O_GA",status:"IN_PROGRESS",reporter_name:"Trần Thị B",created_at:new Date().toISOString()},{id:3,title:"C\xe2y đổ",description:"C\xe2y lớn đổ chắn ngang đường",latitude:10.7889,longitude:106.6992,loai_su_co:"CAY_DO",status:"PENDING",reporter_name:"L\xea Văn C",created_at:new Date().toISOString()},{id:4,title:"R\xe1c thải tr\xe0n lan",description:"Điểm tập kết r\xe1c chưa được thu gom",latitude:10.7633,longitude:106.6917,loai_su_co:"RAC_THAI",status:"PENDING",reporter_name:"Phạm Thị D",created_at:new Date().toISOString()},{id:5,title:"Đ\xe8n đường hỏng",description:"Đ\xe8n đường kh\xf4ng s\xe1ng từ 3 ng\xe0y nay",latitude:10.8633,longitude:106.6333,loai_su_co:"DEN_DUONG",status:"RESOLVED",reporter_name:"Ho\xe0ng Văn E",created_at:new Date().toISOString()},{id:6,title:"Kẹt xe nghi\xeam trọng",description:"Kẹt xe từ 7h s\xe1ng đến giờ",latitude:10.7589,longitude:106.6,loai_su_co:"KET_XE",status:"IN_PROGRESS",reporter_name:"V\xf5 Thị F",created_at:new Date().toISOString()}],k=[{id:1,title:"Ch\xe1y nh\xe0 d\xe2n",description:"Ch\xe1y lớn tại khu d\xe2n cư",latitude:10.7722,longitude:106.6981,loai_su_co:"CHAY",severity:"HIGH",status:"ACTIVE",created_at:new Date().toISOString()},{id:2,title:"Tai nạn giao th\xf4ng",description:"Va chạm giữa 2 xe \xf4 t\xf4",latitude:10.7611,longitude:106.6889,loai_su_co:"TAI_NAN",severity:"MEDIUM",status:"ACTIVE",created_at:new Date().toISOString()},{id:3,title:"Ngập lụt nghi\xeam trọng",description:"Ngập s\xe2u 50cm, nhiều xe chết m\xe1y",latitude:10.7556,longitude:106.5978,loai_su_co:"NGAP",severity:"HIGH",status:"ACTIVE",created_at:new Date().toISOString()}],_=[{id:1,name:"Camera AI L\xfd Thường Kiệt",latitude:10.7711,longitude:106.7056,sensor_type:"CAMERA",status:"ONLINE",last_reading:{detected:"traffic_jam",confidence:.85}},{id:2,name:"Cảm biến ngập Quận 2",latitude:10.79,longitude:106.74,sensor_type:"FLOOD",status:"ONLINE",last_reading:{water_level:15,unit:"cm"}},{id:3,name:"Radar ch\xe1y Quận 7",latitude:10.735,longitude:106.725,sensor_type:"FIRE",status:"ONLINE",last_reading:{temperature:28,smoke:!1}},{id:4,name:"Sensor đa năng Quận 12",latitude:10.8611,longitude:106.6361,sensor_type:"MULTI",status:"ONLINE",last_reading:{aqi:85,temperature:32,humidity:75}},{id:5,name:"Cổng IoT B\xecnh Thạnh",latitude:10.82,longitude:106.735,sensor_type:"GATEWAY",status:"OFFLINE"}],w=[{id:1,name:"V\xf9ng ngập B\xecnh T\xe2n",severity:"HIGH",geometry:{type:"Polygon",coordinates:[[[106.595,10.75],[106.605,10.75],[106.605,10.76],[106.595,10.76],[106.595,10.75]]]}},{id:2,name:"V\xf9ng ngập Quận 8",severity:"MEDIUM",geometry:{type:"Polygon",coordinates:[[[106.69,10.72],[106.7,10.72],[106.7,10.73],[106.69,10.73],[106.69,10.72]]]}}],A=[{value:"ALL",label:"Tất cả",color:"#6b7280"},{value:"NGAP",label:"Ngập nước",color:"#3b82f6"},{value:"O_GA",label:"Ổ g\xe0",color:"#f59e0b"},{value:"CAY_DO",label:"C\xe2y đổ",color:"#10b981"},{value:"RAC_THAI",label:"R\xe1c thải",color:"#8b5cf6"},{value:"DEN_DUONG",label:"Đ\xe8n đường",color:"#ef4444"},{value:"KET_XE",label:"Kẹt xe",color:"#ec4899"},{value:"CHAY",label:"Ch\xe1y nổ",color:"#dc2626"},{value:"TAI_NAN",label:"Tai nạn",color:"#f97316"}];function E(){var e;let t=(0,s.useRef)(null),a=(0,s.useRef)(null),[i,o]=(0,s.useState)(!1),[E,L]=(0,s.useState)("ALL"),[I,C]=(0,s.useState)({reports:!0,incidents:!0,sensors:!0,floodZones:!0}),[S,O]=(0,s.useState)(null),[T,P]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!t.current||a.current)return;let e=v.env.NEXT_PUBLIC_MAPBOX_TOKEN;if(!e){console.error("Mapbox token not found");return}n().accessToken=e;let r=new(n()).Map({container:t.current,style:"mapbox://styles/mapbox/streets-v12",center:[106.6297,10.8231],zoom:11,pitch:50,bearing:-17.6});return a.current=r,r.on("load",()=>{o(!0),console.log("Available map layers:",r.getStyle().layers.map(e=>e.id)),["poi-label","transit-label","airport-label","settlement-subdivision-label"].forEach(e=>{r.getLayer(e)&&(r.setLayoutProperty(e,"visibility","none"),console.log("Hidden layer: ".concat(e)))}),["water-point-label","water-line-label"].forEach(e=>{r.getLayer(e)&&r.setLayoutProperty(e,"text-field",["match",["get","name"],"South China Sea","Biển Đ\xf4ng",["get","name"]])}),r.addSource("vietnam-islands",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[112,16.5]},properties:{id:"hoang_sa",name:"Quần đảo Ho\xe0ng Sa",name_en:"Paracel Islands",country:"Vietnam"}},{type:"Feature",geometry:{type:"Point",coordinates:[114,10]},properties:{id:"truong_sa",name:"Quần đảo Trường Sa",name_en:"Spratly Islands",country:"Vietnam"}}]}}),r.addLayer({id:"vietnam-islands-layer",type:"circle",source:"vietnam-islands",paint:{"circle-radius":8,"circle-color":"#dc2626","circle-stroke-width":2,"circle-stroke-color":"#ffffff","circle-opacity":.9}}),r.addLayer({id:"vietnam-islands-labels",type:"symbol",source:"vietnam-islands",layout:{"text-field":["get","name"],"text-size":12,"text-offset":[0,1.5],"text-anchor":"top","text-font":["Open Sans Bold","Arial Unicode MS Bold"]},paint:{"text-color":"#dc2626","text-halo-color":"#ffffff","text-halo-width":2}});let e={type:"FeatureCollection",features:j.map(e=>({type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{...e,layer_type:"report"}}))};r.addSource("reports",{type:"geojson",data:e}),r.addLayer({id:"reports-layer",type:"circle",source:"reports",paint:{"circle-radius":12,"circle-color":["match",["get","status"],"PENDING","#f59e0b","IN_PROGRESS","#3b82f6","RESOLVED","#10b981","#6b7280"],"circle-stroke-width":3,"circle-stroke-color":"#ffffff","circle-opacity":.9,"circle-blur":.15}}),r.addLayer({id:"reports-labels",type:"symbol",source:"reports",layout:{"text-field":["get","title"],"text-size":11,"text-offset":[0,1.5],"text-anchor":"top","text-optional":!0},paint:{"text-color":"#1f2937","text-halo-color":"#ffffff","text-halo-width":2}});let t={type:"FeatureCollection",features:k.map(e=>({type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{...e,layer_type:"incident"}}))};r.addSource("incidents",{type:"geojson",data:t}),r.addLayer({id:"incidents-layer",type:"circle",source:"incidents",paint:{"circle-radius":18,"circle-color":["match",["get","severity"],"HIGH","#dc2626","MEDIUM","#f59e0b","LOW","#10b981","#6b7280"],"circle-stroke-width":4,"circle-stroke-color":"#ffffff","circle-opacity":.95,"circle-blur":.15}}),r.addLayer({id:"incidents-pulse",type:"circle",source:"incidents",filter:["==",["get","severity"],"HIGH"],paint:{"circle-radius":25,"circle-color":"#dc2626","circle-opacity":.3,"circle-blur":.5}}),r.addLayer({id:"incidents-labels",type:"symbol",source:"incidents",layout:{"text-field":["get","title"],"text-size":12,"text-offset":[0,2],"text-anchor":"top","text-optional":!0},paint:{"text-color":"#dc2626","text-halo-color":"#ffffff","text-halo-width":2.5}});let a={type:"FeatureCollection",features:_.map(e=>({type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{...e,layer_type:"sensor"}}))};r.addSource("sensors",{type:"geojson",data:a}),r.addLayer({id:"sensors-layer",type:"circle",source:"sensors",paint:{"circle-radius":10,"circle-color":["match",["get","status"],"ONLINE","#10b981","OFFLINE","#ef4444","#6b7280"],"circle-stroke-width":3,"circle-stroke-color":"#ffffff","circle-opacity":.85}}),r.addLayer({id:"sensors-labels",type:"symbol",source:"sensors",layout:{"text-field":"\uD83D\uDCE1","text-size":16,"text-allow-overlap":!0}});let s={type:"FeatureCollection",features:w.map(e=>({type:"Feature",geometry:e.geometry,properties:{...e,layer_type:"floodzone"}}))};r.addSource("flood-zones",{type:"geojson",data:s}),r.addLayer({id:"flood-zones-layer",type:"fill",source:"flood-zones",paint:{"fill-color":["match",["get","severity"],"HIGH","#dc2626","MEDIUM","#f59e0b","LOW","#3b82f6","#6b7280"],"fill-opacity":.25}}),r.addLayer({id:"flood-zones-outline",type:"line",source:"flood-zones",paint:{"line-color":["match",["get","severity"],"HIGH","#dc2626","MEDIUM","#f59e0b","LOW","#3b82f6","#6b7280"],"line-width":3,"line-dasharray":[2,2]}}),r.addLayer({id:"flood-zones-labels",type:"symbol",source:"flood-zones",layout:{"text-field":["get","name"],"text-size":12},paint:{"text-color":"#dc2626","text-halo-color":"#ffffff","text-halo-width":2}}),["reports-layer","incidents-layer","sensors-layer"].forEach(e=>{r.on("click",e,e=>{var t;let a=null===(t=e.features)||void 0===t?void 0:t[0];if(!a)return;let s=a.properties;if(!s)return;let l={id:s.id,title:s.title||s.name,description:s.description,latitude:s.latitude,longitude:s.longitude,loai_su_co:s.loai_su_co,status:s.status,layer_type:s.layer_type};"report"===s.layer_type?(l.reporter_name=s.reporter_name,l.created_at=s.created_at):"incident"===s.layer_type?(l.severity=s.severity,l.created_at=s.created_at):"sensor"===s.layer_type&&(l.sensor_type=s.sensor_type,l.last_reading=s.last_reading),O(l),P(!0),r.flyTo({center:[s.longitude,s.latitude],zoom:15,duration:1500})}),r.on("mouseenter",e,()=>{r.getCanvas().style.cursor="pointer"}),r.on("mouseleave",e,()=>{r.getCanvas().style.cursor=""})})}),()=>{a.current&&(a.current.remove(),a.current=null)}},[]),(0,s.useEffect)(()=>{let e=a.current;e&&i&&(["reports-layer","reports-labels"].forEach(t=>{e.getLayer(t)&&e.setLayoutProperty(t,"visibility",I.reports?"visible":"none")}),["incidents-layer","incidents-pulse","incidents-labels"].forEach(t=>{e.getLayer(t)&&e.setLayoutProperty(t,"visibility",I.incidents?"visible":"none")}),["sensors-layer","sensors-labels"].forEach(t=>{e.getLayer(t)&&e.setLayoutProperty(t,"visibility",I.sensors?"visible":"none")}),["flood-zones-layer","flood-zones-outline","flood-zones-labels"].forEach(t=>{e.getLayer(t)&&e.setLayoutProperty(t,"visibility",I.floodZones?"visible":"none")}))},[I,i]),(0,s.useEffect)(()=>{let e=a.current;if(!e||!i)return;let t="ALL"===E?null:["==",["get","loai_su_co"],E];["reports-layer","reports-labels"].forEach(a=>{e.getLayer(a)&&(t?e.setFilter(a,t):e.setFilter(a,null))}),["incidents-layer","incidents-pulse","incidents-labels"].forEach(a=>{e.getLayer(a)&&(t?e.setFilter(a,t):e.setFilter(a,null))})},[E,i]),(0,r.jsxs)("div",{className:"relative w-full h-screen overflow-hidden bg-gray-50",children:[(0,r.jsx)(l.default,{}),(0,r.jsxs)("div",{className:"absolute inset-0 pt-18 sm:pt-18",children:[(0,r.jsx)("div",{ref:t,className:"w-full h-full"}),(0,r.jsx)("div",{className:"absolute left-0 top-20 sm:top-24 bottom-0 w-80 bg-white/98 dark:bg-gray-900/95 backdrop-blur-xl shadow-2xl border-r border-gray-200 dark:border-gray-800 z-10 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(c,{className:"w-5 h-5 text-brand-600"}),(0,r.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wide",children:"Lọc theo loại"})]}),(0,r.jsx)("div",{className:"space-y-2",children:A.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors",children:[(0,r.jsx)("input",{type:"radio",name:"filter",checked:E===e.value,onChange:()=>L(e.value),className:"w-4 h-4 text-brand-600 focus:ring-brand-500"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.label})]})]},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(d.A,{className:"w-5 h-5 text-brand-600"}),(0,r.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wide",children:"Hiển thị lớp dữ liệu"})]}),(0,r.jsx)("div",{className:"space-y-2",children:[{key:"reports",label:"Phản \xe1nh (Reports)",icon:y.A},{key:"incidents",label:"Sự cố (Incidents)",icon:x.A},{key:"sensors",label:"Cảm biến IoT",icon:g.A},{key:"floodZones",label:"V\xf9ng ngập",icon:u}].map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",checked:I[e.key],onChange:()=>C({...I,[e.key]:!I[e.key]}),className:"w-5 h-5 text-brand-600 rounded focus:ring-brand-500"}),(0,r.jsx)(e.icon,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.label})]},e.key))})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,r.jsx)("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-3",children:"Ch\xfa th\xedch"}),(0,r.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Trạng th\xe1i Phản \xe1nh:"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Chờ xử l\xfd"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Đang xử l\xfd"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Đ\xe3 giải quyết"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Mức độ Sự cố:"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-600"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Cao"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Trung b\xecnh"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Thấp"})]})]})]})]})]})]})}),T&&S&&(0,r.jsx)("div",{className:"absolute top-20 sm:top-24 right-0 bottom-0 w-96 bg-white dark:bg-gray-900 shadow-2xl border-l border-gray-200 dark:border-gray-800 z-40 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Chi tiết"}),(0,r.jsx)("button",{onClick:()=>{P(!1),O(null)},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400",children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"title"in S?S.title:S.name}),"description"in S&&S.description&&(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:S.description})]}),"loai_su_co"in S&&S.loai_su_co&&(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold text-white",style:{backgroundColor:(e=>{let t=A.find(t=>t.value===e);return(null==t?void 0:t.color)||"#6b7280"})(S.loai_su_co)},children:null===(e=A.find(e=>e.value===("loai_su_co"in S?S.loai_su_co:"")))||void 0===e?void 0:e.label})}),"report"===S.layer_type&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(h,{className:"w-4 h-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Người b\xe1o c\xe1o:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:S.reporter_name||"N/A"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:["RESOLVED"===S.status?(0,r.jsx)(p.A,{className:"w-4 h-4 text-green-500"}):"IN_PROGRESS"===S.status?(0,r.jsx)(f.A,{className:"w-4 h-4 text-blue-500"}):(0,r.jsx)(b.A,{className:"w-4 h-4 text-yellow-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Trạng th\xe1i:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:"RESOLVED"===S.status?"Đ\xe3 giải quyết":"IN_PROGRESS"===S.status?"Đang xử l\xfd":"Chờ xử l\xfd"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(b.A,{className:"w-4 h-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Thời gian:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(S.created_at).toLocaleString("vi-VN")})]})]}),"incident"===S.layer_type&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Mức độ:"}),(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold text-white",style:{backgroundColor:(e=>{switch(e){case"HIGH":return"#dc2626";case"MEDIUM":return"#f59e0b";case"LOW":return"#10b981";default:return"#6b7280"}})(S.severity)},children:"HIGH"===S.severity?"Cao":"MEDIUM"===S.severity?"Trung b\xecnh":"Thấp"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Trạng th\xe1i:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:"ACTIVE"===S.status?"Đang diễn ra":"Đ\xe3 xử l\xfd"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(b.A,{className:"w-4 h-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Thời gian:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(S.created_at).toLocaleString("vi-VN")})]})]}),"sensor"===S.layer_type&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Loại:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:S.sensor_type})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:["ONLINE"===S.status?(0,r.jsx)(p.A,{className:"w-4 h-4 text-green-500"}):(0,r.jsx)(N,{className:"w-4 h-4 text-red-500"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Trạng th\xe1i:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:"ONLINE"===S.status?"Online":"Offline"})]}),S.last_reading&&(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Dữ liệu mới nhất:"}),(0,r.jsx)("pre",{className:"text-xs text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:JSON.stringify(S.last_reading,null,2)})]})]}),(0,r.jsxs)("div",{className:"p-4 bg-brand-50 dark:bg-brand-900/20 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(y.A,{className:"w-4 h-4 text-brand-600 dark:text-brand-400"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Vị tr\xed"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[S.latitude.toFixed(6),", ",S.longitude.toFixed(6)]})]})]})]})})]})]})}function L(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-brand-200 border-t-brand-600 rounded-full animate-spin"})}),(0,r.jsx)("div",{className:"mt-6 text-lg font-semibold text-gray-700",children:"Đang tải bản đồ CityResQ360..."}),(0,r.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]}),children:(0,r.jsx)(E,{})})}},4186:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4355:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},4416:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4516:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4690:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(5155),s=a(6874),l=a.n(s),i=a(2115),n=a(2900),o=a(5695);function c(){let[e,t]=(0,i.useState)(!1),a=(0,o.usePathname)();return(0,i.useEffect)(()=>{let e=()=>{t(window.scrollY>20)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,r.jsx)(n.P.nav,{initial:{y:-100},animate:{y:0},className:"fixed top-0 left-0 right-0 z-50 transition-all duration-500 ".concat(e||"/"!==a?"bg-white/80 dark:bg-gray-950/80 backdrop-blur-xl shadow-theme-lg border-b border-gray-200/50 dark:border-gray-800/50":"bg-transparent"),children:(0,r.jsx)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[(0,r.jsx)(l(),{href:"/",className:"flex items-center gap-2",children:(0,r.jsx)(n.P.div,{whileHover:{scale:1.05},children:(0,r.jsx)("img",{src:"/images/logo/logo.svg",alt:"CityResQ360 Logo",className:"h-8 w-auto"})})}),(0,r.jsx)("div",{className:"hidden gap-8 md:flex",children:[{name:"Bản đồ",href:"/map"},{name:"Chiến dịch",href:"/actions"},{name:"Demo AI",href:"/ai-demo"}].map((e,t)=>(0,r.jsxs)(n.P.a,{href:e.href,className:"text-sm font-medium transition-colors relative group ".concat(a===e.href?"text-brand-600 dark:text-brand-400":"text-gray-700 hover:text-brand-600 dark:text-gray-300 dark:hover:text-brand-400"),initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:[e.name,(0,r.jsx)("span",{className:"absolute bottom-0 left-0 h-0.5 bg-gradient-to-r from-brand-500 to-brand-600 transition-all ".concat(a===e.href?"w-full":"w-0 group-hover:w-full")})]},e.name))}),(0,r.jsxs)(n.P.div,{className:"flex items-center gap-3",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,r.jsx)(l(),{href:"/login",className:"px-4 py-2 text-sm font-medium text-gray-700 transition-all rounded-lg hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800/50",children:"Đăng nhập"}),(0,r.jsx)(l(),{href:"/register",className:"px-4 py-2 text-sm font-medium text-white transition-all rounded-lg bg-gradient-to-r from-brand-500 to-brand-600 hover:shadow-lg hover:shadow-brand-500/50 hover:scale-105",children:"Đăng k\xfd"})]})]})})})}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},8689:()=>{},9397:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},9474:(e,t,a)=>{Promise.resolve().then(a.bind(a,3866))},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:y,...x}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:o?24*Number(n)/Number(s):n,className:l("lucide",c),...x},[...y.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:o,...c}=a;return(0,r.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(s(e)),o),...c})});return a.displayName="".concat(e),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[168,240,6874,2900,8441,1684,7358],()=>t(9474)),_N_E=e.O()}]);