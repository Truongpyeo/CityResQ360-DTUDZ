(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6498],{5589:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var n=s(5155),a=s(2115),l=s(5041),r=s(2960),i=s(9509);class c{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{showToast:n=!0,throwError:a=!1,headers:l={},...r}=t;try{let t;let i="".concat(this.baseUrl).concat(e),c=await fetch(i,{...r,headers:{"Content-Type":"application/json",...l}}),d=c.headers.get("content-type");if(t=(null==d?void 0:d.includes("application/json"))?await c.json():await c.text(),!c.ok){let e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||"Request failed with status ".concat(c.status);if(n&&s.e(7451).then(s.bind(s,7451)).then(e=>{let{useToast:t}=e}),a)throw Error(e);return{data:null,error:e,status:c.status}}return t}catch(t){let e=t instanceof Error?t.message:"Network error";if(a)throw t;return{data:null,error:e,status:0}}}async get(e,t){return this.request(e,{...t,method:"GET"})}async post(e,t,s){return this.request(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t,s){return this.request(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t,s){return this.request(e,{...s,method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e,t){return this.request(e,{...t,method:"DELETE"})}constructor(e=""){this.baseUrl=e}}let d=new c(i.env.NEXT_PUBLIC_API_URL||"http://localhost:8000");var o=s(3109),h=s(1154),m=s(2713);function x(){let[e,t]=(0,a.useState)([50,60,70,80,90]),[s,i]=(0,a.useState)([75,78,72,68,65]),[c,x]=(0,a.useState)("tree_planting"),[g,u]=(0,a.useState)(100),p=(0,l.n)({mutationFn:async e=>await d.post("/api/ai/analyze/correlation",e)}),b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tree_planting",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return(0,r.I)({queryKey:["predict-impact",e,t,s],queryFn:async()=>await d.get("/api/ai/predict/impact?action=".concat(e,"&current_aqi=").concat(t,"&current_energy=").concat(s)),enabled:!!e,staleTime:6e5})}(c,g),j=async()=>{await p.mutateAsync({analysis_type:"correlation",title:"Ph\xe2n t\xedch tương quan M\xf4i trường - Gi\xe1o dục",description:"Ph\xe2n t\xedch mối tương quan giữa chất lượng kh\xf4ng kh\xed v\xe0 kết quả học tập",env_values:e,edu_scores:s})},N=p.data;return(0,n.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white p-6",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-blue-800 mb-2",children:"\uD83E\uDD16 Ph\xe2n T\xedch AI"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Kh\xe1m ph\xe1 mối tương quan giữa m\xf4i trường, gi\xe1o dục v\xe0 năng lượng"})]}),(0,n.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-blue-100",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,n.jsx)(o.A,{className:"text-blue-600",size:24}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-blue-900",children:"Ph\xe2n t\xedch Tương Quan"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gi\xe1 trị M\xf4i trường (AQI)"}),(0,n.jsx)("input",{type:"text",value:e.join(", "),onChange:e=>t(e.target.value.split(",").map(e=>parseFloat(e.trim())||0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"50, 60, 70, 80, 90"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Điểm Gi\xe1o dục"}),(0,n.jsx)("input",{type:"text",value:s.join(", "),onChange:e=>i(e.target.value.split(",").map(e=>parseFloat(e.trim())||0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"75, 78, 72, 68, 65"})]}),(0,n.jsx)("button",{onClick:j,disabled:p.isPending,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:p.isPending?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.A,{className:"animate-spin",size:20}),"Đang ph\xe2n t\xedch..."]}):"\uD83D\uDCCA Ph\xe2n t\xedch Tương quan"}),N&&(0,n.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-600",children:"Hệ số Tương quan"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:N.correlation_coefficient.toFixed(3)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-600",children:"R-squared"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[(100*N.r_squared).toFixed(1),"%"]})]}),(0,n.jsxs)("div",{className:"col-span-2",children:[(0,n.jsx)("p",{className:"text-gray-600 mb-1",children:"Diễn giải"}),(0,n.jsx)("p",{className:"text-sm font-medium",children:N.interpretation})]}),(0,n.jsxs)("div",{className:"col-span-2",children:[(0,n.jsx)("p",{className:"text-gray-600 mb-1",children:"Khuyến nghị"}),(0,n.jsx)("p",{className:"text-sm",children:N.recommendation})]})]})})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-green-100",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,n.jsx)(m.A,{className:"text-green-600",size:24}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-green-900",children:"Dự Đo\xe1n T\xe1c Động"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chọn H\xe0nh động"}),(0,n.jsxs)("select",{value:c,onChange:e=>{x(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,n.jsx)("option",{value:"tree_planting",children:"\uD83C\uDF33 Trồng c\xe2y xanh"}),(0,n.jsx)("option",{value:"solar_installation",children:"☀️ Lắp đặt pin mặt trời"}),(0,n.jsx)("option",{value:"green_education",children:"\uD83D\uDCDA Gi\xe1o dục m\xf4i trường"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AQI Hiện tại"}),(0,n.jsx)("input",{type:"number",value:g,onChange:e=>u(parseInt(e.target.value)||100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",min:"0",max:"500"})]}),b.data&&(0,n.jsxs)("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,n.jsx)("h3",{className:"font-semibold text-green-900 mb-3",children:"T\xe1c Động Dự Đo\xe1n:"}),(0,n.jsx)("div",{className:"space-y-2 text-sm",children:Object.entries(b.data.predicted_impact).map(e=>{let[t,s]=e;return(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("span",{className:"text-gray-600 capitalize",children:[t.replace(/_/g," "),":"]}),(0,n.jsx)("span",{className:"font-medium text-green-700",children:"number"==typeof s?s.toFixed(1):s})]},t)})})]}),(0,n.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-xs text-yellow-800",children:"\uD83D\uDCA1 Dự đo\xe1n t\xe1c động gi\xfap bạn hiểu r\xf5 hơn về lợi \xedch của c\xe1c h\xe0nh động xanh"})]})]})]}),(0,n.jsxs)("div",{className:"mt-8 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg shadow-lg p-8 text-white",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"✨ Khuyến Nghị H\xe0nh Động Xanh"}),(0,n.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83C\uDF31 Trồng C\xe2y"}),(0,n.jsx)("p",{className:"text-sm",children:"Trồng 500-1000 c\xe2y xanh để cải thiện chất lượng kh\xf4ng kh\xed"})]}),(0,n.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"☀️ Năng Lượng Xanh"}),(0,n.jsx)("p",{className:"text-sm",children:"Lắp đặt 5-10 hệ thống pin mặt trời tại c\xe1c trường học"})]}),(0,n.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83D\uDCDA Gi\xe1o Dục"}),(0,n.jsx)("p",{className:"text-sm",children:"Mở kh\xf3a học về bảo vệ m\xf4i trường cho học sinh"})]})]})]})]})})}function g(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Đang tải..."}),children:(0,n.jsx)(x,{})})}},7633:(e,t,s)=>{Promise.resolve().then(s.bind(s,5589))}},e=>{var t=t=>e(e.s=t);e.O(0,[1807,9335,8441,1684,7358],()=>t(7633)),_N_E=e.O()}]);