(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2610],{646:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1732:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>E});var r=t(5155),s=t(2115),i=t(2900),n=t(6766),l=t(4690),d=t(4516),c=t(4186),o=t(9397),x=t(4416),g=t(1243),m=t(646),h=t(6785),p=t(3109),y=t(4869),b=t(9376),u=t(5525),f=t(3578),v=t(2138),j=t(5040),N=t(1366),k=t(8964),w=t(1736),_=t(5411),A=t.n(_);t(8689);var P=t(9509);{let e=P.env.NEXT_PUBLIC_MAPBOX_TOKEN;e&&(A().accessToken=e)}let T=[{id:1,ward_name:"Phường Bến Ngh\xe9",district:"Quận 1",latitude:10.7769,longitude:106.7009,total_incidents:24,pending_count:8,in_progress_count:6,resolved_count:10,high_severity_count:3,avg_resolution_time:4.5,resolution_rate:.42,priority_score:8.5,top_incident_types:["NGAP","KET_XE","O_GA"],recommended_actions:["Tăng cường hệ thống tho\xe1t nước","Cải thiện giao th\xf4ng tại c\xe1c điểm n\xf3ng","Sửa chữa đường x\xe1 định kỳ"]},{id:2,ward_name:"Phường Đa Kao",district:"Quận 1",latitude:10.7889,longitude:106.6992,total_incidents:18,pending_count:5,in_progress_count:4,resolved_count:9,high_severity_count:2,avg_resolution_time:3.2,resolution_rate:.5,priority_score:7.2,top_incident_types:["DEN_DUONG","RAC_THAI"],recommended_actions:["Bảo tr\xec hệ thống chiếu s\xe1ng","Tăng tần suất thu gom r\xe1c"]},{id:3,ward_name:"Phường B\xecnh Hưng H\xf2a",district:"Quận B\xecnh T\xe2n",latitude:10.7589,longitude:106.6,total_incidents:32,pending_count:15,in_progress_count:7,resolved_count:10,high_severity_count:5,avg_resolution_time:6.8,resolution_rate:.31,priority_score:9.5,top_incident_types:["NGAP","CHAY","CAY_DO"],recommended_actions:["N\xe2ng cấp hệ thống chống ngập","Tăng cường ph\xf2ng ch\xe1y chữa ch\xe1y","Cắt tỉa c\xe2y xanh định kỳ"]},{id:4,ward_name:"Phường An Lạc",district:"Quận B\xecnh T\xe2n",latitude:10.75,longitude:106.5933,total_incidents:28,pending_count:12,in_progress_count:8,resolved_count:8,high_severity_count:4,avg_resolution_time:7.5,resolution_rate:.29,priority_score:9.8,top_incident_types:["NGAP","TAI_NAN","KET_XE"],recommended_actions:["Cải thiện hệ thống tho\xe1t nước","Lắp đặt camera gi\xe1m s\xe1t giao th\xf4ng","Tổ chức lại giao th\xf4ng tại c\xe1c n\xfat giao"]},{id:5,ward_name:"Phường T\xe2n Tạo",district:"Quận B\xecnh T\xe2n",latitude:10.7556,longitude:106.5978,total_incidents:21,pending_count:7,in_progress_count:5,resolved_count:9,high_severity_count:2,avg_resolution_time:5.2,resolution_rate:.43,priority_score:7.8,top_incident_types:["O_GA","RAC_THAI"],recommended_actions:["Sửa chữa đường x\xe1","Tăng cường vệ sinh m\xf4i trường"]}],C={NGAP:"Ngập nước",O_GA:"Ổ g\xe0",CAY_DO:"C\xe2y đổ",RAC_THAI:"R\xe1c thải",DEN_DUONG:"Đ\xe8n đường",KET_XE:"Kẹt xe",CHAY:"Ch\xe1y nổ",TAI_NAN:"Tai nạn"};function I(){let e=(0,s.useRef)(null),a=(0,s.useRef)(null),[t,_]=(0,s.useState)(!1),[I,E]=(0,s.useState)(null),[L,G]=(0,s.useState)(!1),[B,S]=(0,s.useState)(null),[F,O]=(0,s.useState)({x:0,y:0});(0,s.useEffect)(()=>{let e=e=>{O({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]);let H={type:"FeatureCollection",features:T.map(e=>({type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{value:10*e.priority_score,...e}}))};(0,s.useEffect)(()=>{if(!e.current||a.current)return;let t=P.env.NEXT_PUBLIC_MAPBOX_TOKEN;if(!t){console.error("Mapbox token not found");return}A().accessToken=t;let r=new(A()).Map({container:e.current,style:"mapbox://styles/mapbox/standard",center:[106.6297,10.8231],zoom:11,pitch:45,bearing:-17.6});return a.current=r,r.on("load",()=>{_(!0),r.addSource("priority-heatmap",{type:"geojson",data:H}),r.addLayer({id:"priority-heatmap",type:"heatmap",source:"priority-heatmap",maxzoom:15,layout:{visibility:"visible"},paint:{"heatmap-weight":["interpolate",["linear"],["get","value"],0,0,50,.3,70,.7,100,1],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(34, 197, 94, 0)",.3,"rgba(34, 197, 94, 0.5)",.5,"rgba(251, 191, 36, 0.7)",.7,"rgba(249, 115, 22, 0.8)",1,"rgba(239, 68, 68, 1)"],"heatmap-radius":60,"heatmap-opacity":.85}}),r.addLayer({id:"priority-circles",type:"circle",source:"priority-heatmap",paint:{"circle-radius":["interpolate",["linear"],["get","value"],0,8,100,30],"circle-color":["interpolate",["linear"],["get","value"],0,"#22c55e",50,"#fbbf24",70,"#f97316",100,"#ef4444"],"circle-opacity":.6,"circle-stroke-width":2,"circle-stroke-color":"#fff"}}),r.on("click","priority-circles",e=>{var a;let t=null===(a=e.features)||void 0===a?void 0:a[0];if(!t)return;let s=t.properties,i=T.find(e=>e.id===s.id)||s;E(i),G(!0),new(A()).Popup().setLngLat(e.lngLat).setHTML('\n            <div class="p-2">\n              <h3 class="font-semibold text-gray-900 mb-1">'.concat(i.ward_name,'</h3>\n              <p class="text-sm text-gray-600">').concat(i.district,'</p>\n              <p class="text-sm mt-1">\n                <span class="font-medium">Độ ưu ti\xean: </span>\n                <span class="font-bold text-red-600">').concat(i.priority_score.toFixed(1),'/10</span>\n              </p>\n              <p class="text-sm">\n                <span class="font-medium">Sự cố: </span>\n                <span class="font-bold">').concat(i.total_incidents,"</span>\n              </p>\n            </div>\n          ")).addTo(r)}),r.on("mouseenter","priority-circles",()=>{r.getCanvas().style.cursor="pointer"}),r.on("mouseleave","priority-circles",()=>{r.getCanvas().style.cursor=""}),r.on("mousemove","priority-circles",e=>{var a;let t=null===(a=e.features)||void 0===a?void 0:a[0];t&&S(t.properties)})}),()=>{a.current&&(a.current.remove(),a.current=null)}},[]);let M=e=>{E(e),G(!0),a.current&&t&&a.current.flyTo({center:[e.longitude,e.latitude],zoom:14,duration:1500})},V=e=>e>=9?"text-red-600 bg-red-50 dark:bg-red-900/20":e>=7?"text-orange-600 bg-orange-50 dark:bg-orange-900/20":e>=5?"text-yellow-600 bg-yellow-50 dark:bg-yellow-900/20":"text-green-600 bg-green-50 dark:bg-green-900/20",X=e=>e>=.5?"text-green-600":e>=.3?"text-yellow-600":"text-red-600",z=T.reduce((e,a)=>e+a.total_incidents,0),D=T.reduce((e,a)=>e+a.pending_count,0),R=T.reduce((e,a)=>e+a.avg_resolution_time,0)/T.length,K=T.reduce((e,a)=>e+a.resolution_rate,0)/T.length;return T.reduce((e,a)=>e+a.recommended_actions.length,0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{}),(0,r.jsxs)("div",{className:"relative w-full min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 overflow-hidden",children:[(0,r.jsxs)("div",{className:"fixed inset-0 pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-brand-50/30 to-brand-50/20 dark:from-gray-950 dark:via-brand-950/20 dark:to-brand-950/10"}),(0,r.jsx)("div",{className:"absolute inset-0 opacity-60 dark:opacity-70",children:(0,r.jsx)(w.G,{number:20})}),(0,r.jsx)(k.s,{className:"opacity-60 dark:opacity-70"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-[0.02] dark:opacity-[0.05]"}),(0,r.jsx)("div",{className:"absolute inset-0 opacity-20 dark:opacity-15 transition-opacity duration-300",style:{background:"radial-gradient(circle 800px at ".concat(F.x,"px ").concat(F.y,"px, rgba(99, 102, 241, 0.15), transparent 80%)")}})]}),(0,r.jsx)("div",{className:"relative z-10 pt-32 pb-20",children:(0,r.jsxs)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[(0,r.jsxs)(i.P.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},transition:{duration:.6,type:"spring",stiffness:100,damping:10},className:"inline-flex items-center gap-2 px-4 py-2 mb-8 rounded-full bg-gradient-to-r from-brand-50 to-brand-50 dark:from-brand-500/10 dark:to-brand-500/10 border border-brand-200/50 dark:border-brand-800/50 shadow-lg backdrop-blur-sm hover:scale-105 transition-transform",children:[(0,r.jsxs)("span",{className:"relative flex h-3 w-3",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-brand-500"})]}),(0,r.jsx)("span",{className:"text-sm font-semibold bg-gradient-to-r from-brand-600 to-brand-600 dark:from-brand-400 dark:to-brand-400 bg-clip-text text-transparent",children:"Chiến dịch h\xe0nh động • AI Analysis"})]}),(0,r.jsxs)(i.P.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"mb-6 font-black text-gray-900 text-4xl sm:text-5xl lg:text-6xl dark:text-white leading-tight",children:["Xử l\xfd sự cố"," ",(0,r.jsx)("span",{className:"bg-gradient-to-r from-brand-600 via-brand-500 to-brand-500 bg-clip-text text-transparent animate-gradient",children:"th\xf4ng minh"}),(0,r.jsx)("br",{}),"cho đ\xf4 thị"]}),(0,r.jsx)(i.P.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-3xl mx-auto mb-8 text-lg text-gray-600 dark:text-gray-300 leading-relaxed",children:"Ph\xe2n t\xedch v\xe0 đề xuất h\xe0nh động xử l\xfd sự cố theo khu vực dựa tr\xean dữ liệu AI. Gi\xfap ch\xednh quyền ưu ti\xean v\xe0 ph\xe2n bổ nguồn lực hiệu quả cho c\xe1c khu vực cần thiết nhất."})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6 mb-12 sm:grid-cols-2 lg:grid-cols-4",children:[{label:"Tổng sự cố",value:z.toString(),iconPath:"/images/actions/total-icon.png",bgGradient:"from-brand-50 to-brand-100 dark:from-brand-900/20 dark:to-brand-800/20"},{label:"Đang chờ xử l\xfd",value:D.toString(),iconPath:"/images/actions/pending-icon.png",bgGradient:"from-brand-50 to-brand-100 dark:from-brand-900/20 dark:to-brand-800/20"},{label:"Thời gian xử l\xfd TB",value:"".concat(R.toFixed(1),"h"),iconPath:"/images/actions/time-icon.png",bgGradient:"from-brand-50 to-brand-100 dark:from-brand-900/20 dark:to-brand-800/20"},{label:"Tỷ lệ giải quyết",value:"".concat((100*K).toFixed(0),"%"),iconPath:"/images/actions/rate-icon.png",bgGradient:"from-brand-50 to-brand-100 dark:from-brand-900/20 dark:to-brand-800/20"}].map((e,a)=>(0,r.jsx)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3+.1*a},whileHover:{y:-5,scale:1.02},className:"relative p-6 overflow-hidden bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl rounded-2xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 hover:shadow-2xl transition-all",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2",children:e.label}),(0,r.jsx)("p",{className:"text-3xl font-black text-gray-900 dark:text-white",children:e.value})]}),(0,r.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br ".concat(e.bgGradient),children:(0,r.jsx)(n.default,{src:e.iconPath,alt:e.label,width:30,height:30,className:"w-full h-full object-contain"})})]})},e.label))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3 mb-12",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)(i.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.6},className:"relative h-[500px] lg:h-[600px] bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl rounded-2xl shadow-2xl overflow-hidden border border-gray-200/50 dark:border-gray-700/50",children:[(0,r.jsx)("div",{ref:e,className:"w-full h-full"}),B&&(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"absolute top-4 left-4 p-3 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-lg shadow-xl z-10 max-w-xs border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 text-sm",children:B.ward_name}),(0,r.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Tổng sự cố:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:B.total_incidents})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Đang chờ:"}),(0,r.jsx)("span",{className:"font-semibold text-orange-600",children:B.pending_count})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Độ ưu ti\xean:"}),(0,r.jsxs)("span",{className:"font-semibold ".concat(V(B.priority_score).split(" ")[0]),children:[B.priority_score.toFixed(1),"/10"]})]})]})]}),(0,r.jsxs)("div",{className:"absolute bottom-4 right-4 p-3 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-lg shadow-xl z-10 border border-gray-200 dark:border-gray-700 max-w-[180px]",children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-900 dark:text-white mb-2",children:"Ch\xfa giải Độ ưu ti\xean"}),(0,r.jsxs)("div",{className:"space-y-1.5 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500 border border-white shadow-sm"}),(0,r.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Cao (≥9.0)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-orange-500 border border-white shadow-sm"}),(0,r.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"TB (7.0-8.9)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-500 border border-white shadow-sm"}),(0,r.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Thấp (5.0-6.9)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500 border border-white shadow-sm"}),(0,r.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Rất thấp (<5.0)"})]})]})]})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden h-[500px] lg:h-[600px] flex flex-col",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Danh s\xe1ch khu vực"}),(0,r.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[T.length," khu vực được ph\xe2n t\xedch"]})]}),(0,r.jsx)("div",{className:"overflow-y-auto flex-1",children:(0,r.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:T.map(e=>(0,r.jsxs)("div",{onClick:()=>M(e),onMouseEnter:()=>S(e),onMouseLeave:()=>S(null),className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(d.A,{className:"w-3.5 h-3.5 text-success-600 flex-shrink-0"}),(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.ward_name})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 ml-5",children:e.district})]}),(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full ".concat(V(e.priority_score)," ml-2 flex-shrink-0"),children:e.priority_score.toFixed(1)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs ml-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Sự cố: "}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.total_incidents})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Giải quyết: "}),(0,r.jsxs)("span",{className:"font-semibold ".concat(X(e.resolution_rate)),children:[(100*e.resolution_rate).toFixed(0),"%"]})]})]}),(0,r.jsx)("div",{className:"mt-2 ml-5",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.recommended_actions.slice(0,2).map((e,a)=>(0,r.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-blue-100 text-blue-700 dark:bg-blue-500/20 dark:text-blue-400 rounded",children:e},a)),e.recommended_actions.length>2&&(0,r.jsxs)("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",e.recommended_actions.length-2]})]})})]},e.id))})})]})})]}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl rounded-2xl shadow-2xl overflow-hidden border border-gray-200/50 dark:border-gray-700/50 mb-8",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bảng dữ liệu chi tiết"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Phường/X\xe3"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Quận/Huyện"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Tổng sự cố"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Đang chờ"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Độ ưu ti\xean"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Thời gian TB"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"H\xe0nh động"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:T.map(e=>(0,r.jsxs)("tr",{onClick:()=>M(e),onMouseEnter:()=>S(e),onMouseLeave:()=>S(null),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 text-success-600 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.ward_name})]})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:e.district}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.total_incidents})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 text-orange-600 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-orange-600",children:e.pending_count})]})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(V(e.priority_score)),children:[e.priority_score.toFixed(1),"/10"]})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.avg_resolution_time.toFixed(1),"h"]})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.recommended_actions.slice(0,2).map((e,a)=>(0,r.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 dark:bg-blue-500/20 dark:text-blue-400 rounded",children:e},a)),e.recommended_actions.length>2&&(0,r.jsxs)("span",{className:"px-2 py-1 text-xs text-gray-500",children:["+",e.recommended_actions.length-2]})]})})]},e.id))})]})})]}),L&&I&&(0,r.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center mt-20 p-4 bg-black/60 backdrop-blur-md",onClick:()=>G(!1),children:(0,r.jsxs)(i.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},onClick:e=>e.stopPropagation(),className:"w-full max-w-3xl bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden border border-gray-200/50 dark:border-gray-700/50",children:[(0,r.jsx)("div",{className:"relative p-6 bg-gradient-to-br from-orange-500/10 to-red-500/10 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-br from-orange-500 to-red-600",children:(0,r.jsx)(d.A,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("h3",{className:"text-2xl font-black text-gray-900 dark:text-white",children:I.ward_name})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 ml-12",children:I.district})]}),(0,r.jsx)("button",{onClick:()=>G(!1),className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 transition-all hover:rotate-90","aria-label":"Đ\xf3ng",children:(0,r.jsx)(x.A,{className:"w-6 h-6"})})]})}),(0,r.jsxs)("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-5 bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-2xl border border-red-200 dark:border-red-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(g.A,{className:"w-5 h-5 text-red-600"}),(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Tổng sự cố"})]}),(0,r.jsx)("div",{className:"text-3xl font-black text-red-600",children:I.total_incidents})]}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"p-5 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-2xl border border-orange-200 dark:border-orange-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(c.A,{className:"w-5 h-5 text-orange-600"}),(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Đang chờ xử l\xfd"})]}),(0,r.jsx)("div",{className:"text-3xl font-black text-orange-600",children:I.pending_count})]}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-5 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-2xl border border-blue-200 dark:border-blue-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(o.A,{className:"w-5 h-5 text-blue-600"}),(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Thời gian xử l\xfd TB"})]}),(0,r.jsxs)("div",{className:"text-3xl font-black text-blue-600",children:[I.avg_resolution_time.toFixed(1),"h"]})]}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"p-5 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-2xl border border-green-200 dark:border-green-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(m.A,{className:"w-5 h-5 text-green-600"}),(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Tỷ lệ giải quyết"})]}),(0,r.jsxs)("div",{className:"text-3xl font-black text-green-600",children:[(100*I.resolution_rate).toFixed(0),"%"]})]})]}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"p-5 bg-gray-50 dark:bg-gray-900/50 rounded-2xl border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("h4",{className:"mb-3 text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-5 h-5 text-orange-600"}),"Loại sự cố phổ biến"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:I.top_incident_types.map((e,a)=>(0,r.jsx)(i.P.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.35+.05*a},className:"px-4 py-2 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 text-gray-900 dark:text-white rounded-xl text-sm font-bold border border-gray-300 dark:border-gray-600",children:C[e]||e},a))})]}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"p-5 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-2xl border border-blue-200 dark:border-blue-800",children:[(0,r.jsxs)("h4",{className:"mb-4 text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,r.jsx)(p.A,{className:"w-5 h-5 text-blue-600"}),"H\xe0nh động được đề xuất"]}),(0,r.jsx)("div",{className:"space-y-3",children:Array.isArray(I.recommended_actions)&&I.recommended_actions.length>0?I.recommended_actions.map((e,a)=>(0,r.jsxs)(i.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.45+.05*a},className:"flex items-start gap-3 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-blue-200 dark:border-blue-800",children:[(0,r.jsx)("div",{className:"p-1 rounded-lg bg-blue-100 dark:bg-blue-900/50",children:(0,r.jsx)(m.A,{className:"w-4 h-4 text-blue-600"})}),(0,r.jsx)("span",{className:"text-gray-900 dark:text-white font-medium flex-1",children:e})]},a)):(0,r.jsx)("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl text-center",children:(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Kh\xf4ng c\xf3 h\xe0nh động được đề xuất"})})})]}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"p-5 bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-2xl border border-orange-200 dark:border-orange-800",children:[(0,r.jsx)("h4",{className:"mb-4 text-lg font-bold text-gray-900 dark:text-white",children:"Ph\xe2n t\xedch độ ưu ti\xean"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:"Điểm ưu ti\xean:"}),(0,r.jsxs)("span",{className:"px-4 py-2 text-lg font-black rounded-xl ".concat(V(I.priority_score)),children:[I.priority_score.toFixed(1),"/10"]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:["Khu vực n\xe0y c\xf3 ",(0,r.jsx)("span",{className:"font-bold text-red-600",children:I.total_incidents})," sự cố, trong đ\xf3 ",(0,r.jsx)("span",{className:"font-bold text-orange-600",children:I.pending_count})," đang chờ xử l\xfd. Thời gian xử l\xfd trung b\xecnh l\xe0 ",(0,r.jsx)("span",{className:"font-bold text-blue-600",children:I.avg_resolution_time.toFixed(1)})," giờ."]})]})]})]})})]})}),(0,r.jsxs)("footer",{className:"relative py-16 bg-gradient-to-b from-gray-900 via-gray-950 to-black border-t border-gray-800 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-[0.03]"}),(0,r.jsxs)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8 relative",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-12 lg:grid-cols-12 mb-12",children:[(0,r.jsxs)("div",{className:"lg:col-span-5",children:[(0,r.jsx)(i.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex items-center gap-3 mb-6",children:(0,r.jsx)("img",{src:"/images/logo/logo.svg",alt:"CityResQ360 Logo",className:"h-12 w-auto"})}),(0,r.jsx)(i.P.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"mb-6 text-gray-400 leading-relaxed text-base",children:"CityResQ360 – nền tảng phản \xe1nh, cảnh b\xe1o v\xe0 gi\xe1m s\xe1t đ\xf4 thị mở, kết nối người d\xe2n, ch\xednh quyền v\xe0 AI để xử l\xfd sự cố theo thời gian thực với CivicPoint minh bạch."}),(0,r.jsx)(i.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"flex gap-4",children:[{icon:y.A,label:"NGSI-LD"},{icon:b.A,label:"AI-Powered"},{icon:u.A,label:"Blockchain"}].map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg backdrop-blur-sm",children:[(0,r.jsx)(e.icon,{className:"w-4 h-4 text-brand-400"}),(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-300",children:e.label})]},a))})]}),(0,r.jsxs)("div",{className:"lg:col-span-7 grid grid-cols-2 md:grid-cols-3 gap-8",children:[(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},children:[(0,r.jsxs)("h3",{className:"mb-4 text-sm font-bold text-white uppercase tracking-wider flex items-center gap-2",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 text-brand-400"}),"Nền tảng"]}),(0,r.jsx)("ul",{className:"space-y-3",children:[{name:"Bản đồ realtime",href:"/map"},{name:"Chiến dịch",href:"/actions"},{name:"Thống k\xea SLA",href:"/stats"},{name:"Ph\xe2n t\xedch AI",href:"/ai-analysis"}].map((e,a)=>(0,r.jsx)(i.P.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.1+.05*a},children:(0,r.jsxs)("a",{href:e.href,className:"text-gray-400 hover:text-brand-400 transition-colors relative group inline-flex items-center gap-2",children:[(0,r.jsx)("span",{className:"group-hover:translate-x-1 transition-transform",children:e.name}),(0,r.jsx)(v.A,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})},e.name))})]}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},children:[(0,r.jsxs)("h3",{className:"mb-4 text-sm font-bold text-white uppercase tracking-wider flex items-center gap-2",children:[(0,r.jsx)(j.A,{className:"w-4 h-4 text-brand-400"}),"T\xe0i nguy\xean"]}),(0,r.jsx)("ul",{className:"space-y-3",children:[{name:"API Docs",href:"#"},{name:"NGSI-LD Guide",href:"#"},{name:"Citizen Handbook",href:"#"},{name:"Officer Manual",href:"#"}].map((e,a)=>(0,r.jsx)(i.P.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.2+.05*a},children:(0,r.jsxs)("a",{href:e.href,className:"text-gray-400 hover:text-brand-400 transition-colors relative group inline-flex items-center gap-2",children:[(0,r.jsx)("span",{className:"group-hover:translate-x-1 transition-transform",children:e.name}),(0,r.jsx)(v.A,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})},e.name))})]}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.3},children:[(0,r.jsxs)("h3",{className:"mb-4 text-sm font-bold text-white uppercase tracking-wider flex items-center gap-2",children:[(0,r.jsx)(N.A,{className:"w-4 h-4 text-brand-400"}),"Li\xean hệ"]}),(0,r.jsx)("ul",{className:"space-y-3",children:[{name:"Về ch\xfang t\xf4i",href:"#"},{name:"Chat với AI",href:"/chat"},{name:"Đăng k\xfd th\xed điểm",href:"/feedback"},{name:"Hỗ trợ",href:"#"}].map((e,a)=>(0,r.jsx)(i.P.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.3+.05*a},children:(0,r.jsxs)("a",{href:e.href,className:"text-gray-400 hover:text-brand-400 transition-colors relative group inline-flex items-center gap-2",children:[(0,r.jsx)("span",{className:"group-hover:translate-x-1 transition-transform",children:e.name}),(0,r.jsx)(v.A,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})},e.name))})]})]})]}),(0,r.jsx)(i.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4},className:"pt-8 border-t border-gray-800",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["\xa9 2025 CityResQ360. All rights reserved. Built with"," ",(0,r.jsx)("span",{className:"text-red-500",children:"❤"})," for Smart Cities."]}),(0,r.jsx)("div",{className:"flex gap-6",children:["Privacy Policy","Terms of Service","Open Source"].map((e,a)=>(0,r.jsx)("a",{href:"#",className:"text-sm text-gray-500 hover:text-brand-400 transition-colors",children:e},a))})]})})]})]})]})]})}function E(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Đang tải..."})}),children:(0,r.jsx)(I,{})})}},1901:(e,a,t)=>{Promise.resolve().then(t.bind(t,1732))},4186:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4416:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6785:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[168,240,6874,2900,3063,8991,8441,1684,7358],()=>a(1901)),_N_E=e.O()}]);